{% extends 'base/base.html' %}

{% block title %}Services{% endblock %}

{% block content %}
<style>
    .service {
        margin-bottom: 20px;
        padding: 10px;
        border: 1px solid #000000;
    }
    .service h3 {
        margin-bottom: 10px;
        color: #000000;
    }
    .service p {
        margin-bottom: 10px;
    }
</style>

<h2>Services</h2>
{% if services %}
    {% for service in services %}
        <div class="service">
            <h3>{{ service.name }} â€“ ${{ service.price }}</h3>
            <h4>Doctor {{service.doctor_id.user_id.first_name}} {{service.doctor_id.user_id.last_name}}</h4>
            <p>{{ service.description }}</p>
            {% if user.is_authenticated %}
            {% if group in request.user.groups.all %}
                <p>You're doctor! if you need an appoinment register as user!</p>
            {% else %}
                <form method="post" action="{% url 'appointment_add' %}">
                    {% csrf_token %}
                    <input type="text" hidden value="{{service.id}}" name="service_id">
                    <input type="text" hidden value="{{ user.id }}" name="user_id">
                    <button type="submit">Add Appointment</button>
                </form>
            {% endif%}
            {% endif %}
        </div>
    {% endfor %}
{% else %}
    <p>No services available at the moment.</p>
{% endif %}
{% endblock %}
